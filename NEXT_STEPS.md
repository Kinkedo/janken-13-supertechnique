# 次の実装：手の自動認識（MediaPipe Hands Web版）

ここから先は「相手の手をボタンで選ぶ」→「カメラ映像から自動判定」に進化させます。

---

## 方針（おすすめ）
- **MediaPipe Hands（JavaScript）** を使って手のランドマーク（指の関節点）を取得
- 指が「伸びている/曲がっている」を判定して
  - 伸びている指が少ない → グー
  - 人差し指＋中指だけ伸びている → チョキ
  - 4〜5本伸びている → パー
- 連続フレームでブレるので
  - 直近 N フレームの多数決（例：10フレーム）
  - もしくは「同じ判定が K 回続いたら確定」（例：6回）
- 確定したら `detectOpponent('rock'|'scissors'|'paper')` を呼ぶ

---

## 追加するファイル
### 1) `hand_detect.js`（新規）
MediaPipe Hands を読み込み、推定結果を返すモジュール

### 2) `index.html` の変更
- MediaPipe の CDN スクリプト（hands / camera_utils など）を読み込む
- `script.js` の前に `hand_detect.js` を読み込む

---

## 次に貼るコード（自宅でコピペ用）
このフォルダに次の2つを追加・変更すると「自動認識版」が動きます：

- `index.html`（追記）
- `hand_detect.js`（新規）
- `script.js`（一部差し替え：ボタンテストを残しつつ自動判定も動かす）

**あなたがやること：**
1. このあと渡す `hand_detect.js` を新規作成
2. `index.html` に CDN 追記
3. `script.js` に「自動判定開始」を追加

---

## 注意（現実的な制約）
- iPhone Safari は環境によってカメラ解像度や処理負荷で重くなることがあります
  - 最初は 640x480 程度に落として動かすのが安全
- 室内光・背景で検出が揺れます（多数決・しきい値が重要）

---

次のファイルセット（コピペ用）を `NEXT_CODE_AUTODETECT.md` に置いてあります。
